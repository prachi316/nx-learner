<!-- Side Navigation -->
<nav
  class="h-screen bg-stone-100 flex flex-col flex-shrink-0 transition-all duration-300 ease-in-out"
  [class.w-64]="!isCollapsed"
  [class.w-16]="isCollapsed"
>
  <!-- Header Section -->
  <div class="bg-gray-800 px-4 py-3">
    <div class="flex items-center justify-between">
      <div class="text-2xl font-bold text-white" [class.hidden]="isCollapsed">nx.</div>
      <button
        class="p-2 hover:bg-gray-700 rounded-lg transition-colors"
        (click)="onToggleCollapse()"
      >
        <app-icon
          theIcon="menu"
          width="20"
          height="20"
          color="white"
          class="w-5 h-5 text-white"
        ></app-icon>
      </button>
    </div>
  </div>

  <!-- School Selection Section -->
  <div class="p-4" [class.hidden]="isCollapsed">
    <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3">
      Selected School
    </div>

    <!-- School Card -->
    <div class="bg-white rounded-lg p-3 mb-3 shadow-sm">
      <div class="flex items-center space-x-2 mb-2">
        <div class="w-4 h-4 bg-red-500 rounded-sm flex items-center justify-center">
          <app-icon
            theIcon="building"
            width="12"
            height="12"
            color="white"
            class="w-3 h-3 text-white"
          ></app-icon>
        </div>
        <span class="text-sm font-medium text-gray-800">{{ schoolInfo.name }}</span>
      </div>
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <div class="w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center">
            <app-icon
              theIcon="check-circle"
              width="12"
              height="12"
              color="white"
              class="w-3 h-3 text-white"
            ></app-icon>
          </div>
          <span class="text-sm text-gray-700">{{ schoolInfo.fullName }}</span>
        </div>
        <app-icon
          theIcon="chevron-right"
          width="16"
          height="16"
          color="#9CA3AF"
          class="w-4 h-4 text-gray-400"
        ></app-icon>
      </div>
    </div>

    <!-- Semester Card -->
    <div class="bg-white rounded-lg p-3 shadow-sm">
      <div class="text-xs text-gray-600 font-medium">
        {{ schoolInfo.semester }}
      </div>
    </div>
  </div>

  <!-- Navigation Links -->
  <div class="flex-1 py-4 px-4">
    <nav class="space-y-2">
      @for (item of navItems; track item.id) {
        <a
          class="flex items-center px-3 py-3 transition-colors relative rounded-lg"
          [class.bg-yellow-200]="item.active"
          [class.text-gray-800]="item.active"
          [class.text-gray-700]="!item.active"
          [class.hover:bg-white]="!item.active"
          (click)="onNavItemClick(item)"
        >
          <!-- Icon based on item type -->
          @switch (item.icon) {
            @case ('home') {
              <app-icon
                theIcon="home"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
              ></app-icon>
            }
            @case ('truck') {
              <app-icon
                theIcon="truck"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
              ></app-icon>
            }
            @case ('chat') {
              <app-icon
                theIcon="chat"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
              ></app-icon>
            }
            @case ('book') {
              <app-icon
                theIcon="book"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
                [class.fill-current]="item.active"
              ></app-icon>
            }
            @case ('books') {
              <app-icon
                theIcon="books"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
              ></app-icon>
            }
            @case ('video') {
              <app-icon
                theIcon="video-camera"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
              ></app-icon>
            }
            @case ('document') {
              <app-icon
                theIcon="document"
                width="20"
                height="20"
                color="currentColor"
                class="w-5 h-5 mr-3"
              ></app-icon>
            }
          }

          <span class="text-sm font-medium" [class.hidden]="isCollapsed">{{ item.label }}</span>

          <!-- Active indicator arrow -->
          @if (item.active && !isCollapsed) {
            <div
              class="absolute right-0 top-1/2 transform -translate-y-1/2 w-0 h-0 border-l-4 border-l-gray-600 border-t-4 border-t-transparent border-b-4 border-b-transparent"
            ></div>
          }
        </a>
      }
    </nav>
  </div>

  <!-- Footer Section -->
  <div class="p-4" [class.hidden]="isCollapsed">
    <!-- Version Info -->
    <div class="text-xs text-gray-500 mb-2">
      {{ version }}
    </div>
    <div class="text-xs text-gray-500 mb-4">
      {{ copyright }}
    </div>

    <!-- User Profile -->
    <div class="bg-gray-200 rounded-lg p-3">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
            <span class="text-white text-sm font-medium">SN</span>
          </div>
          <div>
            <div class="text-sm font-medium text-gray-800">{{ userInfo.name }}</div>
            <div class="text-xs text-gray-600">{{ userInfo.role }}</div>
          </div>
        </div>
        <app-icon
          theIcon="chevron-down"
          width="16"
          height="16"
          color="#6B7280"
          class="w-4 h-4 text-gray-500"
        ></app-icon>
      </div>
    </div>
  </div>
</nav>
